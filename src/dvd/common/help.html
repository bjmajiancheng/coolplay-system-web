<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>帮助管理</title>
</head>
<body>
<div class="super-theme-example">
    <div class="search-form-item col-md-4">
        <label class="label-top">：</label>
        <input name="" class="easyui-validatebox easyui-textbox" prompt="请输入">
    </div>

    <div class="search-form-item col-md-3">
        <a href="javascript:void(0)" onclick="refreshHelpTab()" class="easyui-linkbutton primary">查询</a>
    </div>
</div>

<div class="clear"></div>
<div class="super-theme-example">
    <div style="height: 400px;">
        <table id="helpTab"></table>
    </div>
</div>

<script type="text/javascript">
    ;(function ($, window, document, undefined){
        $('#helpTab').datagrid({
            url: App.href + '/api/common/help/list',
            fit: true,
            pagination: true,
            fitColumns: true,
            method: 'GET',
            pageSize: 10,
            pageList: [10, 25, 50, 100, 200],
            height: 400,
            queryParams: {},
            toolbar: [],
            loadFilter: function(data) {
                if (data.code === 401) {
                    App.showMsg('token失效,请登录!');
                    window.location.href = App.href + '/login.html';
                    return {"total":0, "rows": "[]"};
                } else {
                    return data;
                }
            },
            onBeforeLoad: function (param) {
                var roleName = $("input[name=roleName]").val();

                param.roleName = roleName;
            },
            columns: [
                [{
                    field: 'id',
                    title: '序号',
                    sortable: true,
                    width: 50
                }, {
                    field: 'roleName',
                    title: '角色名称',
                    width: 50
                }, {
                    field: 'ctime',
                    title: '创建时间',
                    width: 50
                }, {
                    field: 'custom_col1',
                    title: '操作',
                    width: 50,
                    align: 'center',
                    formatter: function(value, row, index) {
                        var btns = new Array();
                        btns.push('<a href="javascript:void(0)" class="easyui-linkbutton primary" onclick="updateRole(' + row.id + ')">绑定权限</a>&nbsp;');
                        btns.push('<a href="javascript:void(0)" class="easyui-linkbutton primary" onclick="delRole(' + row.id + ')">删除</a>');
                        return btns.join('');
                    }
                }]
            ]
        });

    })(jQuery, window, document);


    function refreshHelpTab() {
        $('#helpTab').datagrid('reload');
    }

</script>
</body>
</html>